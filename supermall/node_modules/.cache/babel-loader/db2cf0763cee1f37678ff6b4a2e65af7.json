{"remainingRequest":"E:\\softdev\\conderwhy-vue\\Day 10\\课堂代码\\supermall\\node_modules\\babel-loader\\lib\\index.js!E:\\softdev\\conderwhy-vue\\Day 10\\课堂代码\\supermall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\softdev\\conderwhy-vue\\Day 10\\课堂代码\\supermall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\softdev\\conderwhy-vue\\Day 10\\课堂代码\\supermall\\src\\views\\home\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\softdev\\conderwhy-vue\\Day 10\\课堂代码\\supermall\\src\\views\\home\\Home.vue","mtime":1627549529095},{"path":"E:\\softdev\\conderwhy-vue\\Day 10\\课堂代码\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\softdev\\conderwhy-vue\\Day 10\\课堂代码\\supermall\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\softdev\\conderwhy-vue\\Day 10\\课堂代码\\supermall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\softdev\\conderwhy-vue\\Day 10\\课堂代码\\supermall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"E:\\\\softdev\\\\conderwhy-vue\\\\Day 10\\\\\\u8BFE\\u5802\\u4EE3\\u7801\\\\supermall\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport HomeSwiper from './childComps/HomeSwiper';\nimport RecommendView from './childComps/RecommendView';\nimport FeatureView from './childComps/FeatureView';\nimport NavBar from 'components/common/navbar/NavBar';\nimport TabControl from 'components/content/tabControl/TabControl';\nimport GoodList from 'components/content/goods/GoodsList';\nimport Scroll from 'components/common/scroll/Scroll';\nimport BackTop from 'components/content/backTop/BackTop';\nimport { debounce } from \"../../common/utils/utils\";\nimport { getHomeMultidata as _getHomeMultidata, getHomeGoods as _getHomeGoods } from \"network/home\";\nexport default {\n  name: \"Home\",\n  components: {\n    HomeSwiper: HomeSwiper,\n    RecommendView: RecommendView,\n    FeatureView: FeatureView,\n    NavBar: NavBar,\n    TabControl: TabControl,\n    GoodList: GoodList,\n    Scroll: Scroll,\n    BackTop: BackTop\n  },\n  data: function data() {\n    return {\n      banners: [],\n      recommends: [],\n      goods: {\n        'pop': {\n          page: 0,\n          list: []\n        },\n        'new': {\n          page: 0,\n          list: []\n        },\n        'sell': {\n          page: 0,\n          list: []\n        }\n      },\n      currentType: 'pop',\n      isShowBackTop: false,\n      tabOffsetTop: 0,\n      isTabFixed: false,\n      saveY: 0\n    };\n  },\n  computed: {\n    showGoods: function showGoods() {\n      return this.goods[this.currentType].list;\n    },\n    activated: function activated() {\n      this.$refs.scroll.scrollTo(0, this.saveY, 0);\n    },\n    deactivated: function deactivated() {\n      //保存y值\n      this.saveY = this.refs.scroll.getScrollY(); // 取消全局事件的监听\n    }\n  },\n  created: function created() {\n    // 1.请求多个数据\n    this.getHomeMultidata(); // 2.请求商品数据\n\n    this.getHomeGoods('pop');\n    this.getHomeGoods('new');\n    this.getHomeGoods('sell');\n  },\n  mounted: function mounted() {\n    // 1.图片加载完成的事件监听\n    var refresh = debounce(this.$refs.scroll.refresh, 50);\n    this.$bus.$on('itemImageLoad', function () {\n      refresh();\n    });\n  },\n  methods: {\n    /**\n     * 事件监听相关的方法\n     */\n    tabClick: function tabClick(index) {\n      switch (index) {\n        case 0:\n          this.currentType = 'pop';\n          break;\n\n        case 1:\n          this.currentType = 'new';\n          break;\n\n        case 2:\n          this.currentType = 'sell';\n          break;\n      }\n\n      this.$refs.tabControl1.currentIndex = index;\n      this.$refs.tabControl2.currentIndex = index;\n    },\n    backClick: function backClick() {\n      this.$refs.scroll.scrollTo(0, 0);\n    },\n    contentScroll: function contentScroll(position) {\n      this.isShowBackTop = -position.y > 1000; //2.\n\n      this.isTabFixed = -position.y > this.tabOffsetTop;\n    },\n    loadMore: function loadMore() {\n      this.getHomeGoods(this.currentType);\n    },\n    swiperImageLoad: function swiperImageLoad() {\n      this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\n    },\n\n    /**\n     * 网络请求相关的方法\n     */\n    getHomeMultidata: function getHomeMultidata() {\n      var _this = this;\n\n      _getHomeMultidata().then(function (res) {\n        // this.result = res;\n        _this.banners = res.data.banner.list;\n        _this.recommends = res.data.recommend.list;\n      });\n    },\n    getHomeGoods: function getHomeGoods(type) {\n      var _this2 = this;\n\n      var page = this.goods[type].page + 1;\n\n      _getHomeGoods(type, page).then(function (res) {\n        var _this2$goods$type$lis;\n\n        (_this2$goods$type$lis = _this2.goods[type].list).push.apply(_this2$goods$type$lis, _toConsumableArray(res.data.list));\n\n        _this2.goods[type].page += 1; // 完成上拉加载更多\n\n        _this2.$refs.scroll.finishPullUp();\n      });\n    }\n  }\n};",{"version":3,"sources":["Home.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n   <div id=\"home\" class=\"wrapper\">\n    <nav-bar class=\"home-nav\"><div slot=\"center\">购物街</div></nav-bar>\n    <tab-control :titles=\"['流行', '新款', '精选']\"\n                 @tabClick=\"tabClick\"\n                 ref=\"tabControl1\"\n                 class=\"tab-control\" v-show=\"isTabFixed\"/>\n    <scroll class=\"content\"\n            ref=\"scroll\"\n            :probe-type=\"3\"\n            @scroll=\"contentScroll\"\n            :pull-up-load=\"true\"\n            @pullingUp=\"loadMore\">\n      <home-swiper :banners=\"banners\" @swiperImageLoad=\"swiperImageLoad\"/>\n      <recommend-view :recommends=\"recommends\"/>\n      <feature-view/>\n      <tab-control :titles=\"['流行', '新款', '精选']\"\n                   @tabClick=\"tabClick\"\n                   ref=\"tabControl2\" />\n      <good-list :goods=\"showGoods\"/>\n    </scroll>\n    <back-top @click.native=\"backClick\" v-show=\"isShowBackTop\"/>\n  </div>\n</template>\n\n<script>\n  import HomeSwiper from './childComps/HomeSwiper'\n  import RecommendView from './childComps/RecommendView'\n  import FeatureView from './childComps/FeatureView'\n\n  import NavBar from 'components/common/navbar/NavBar'\n  import TabControl from 'components/content/tabControl/TabControl'\n  import GoodList from 'components/content/goods/GoodsList'\n  import Scroll from 'components/common/scroll/Scroll'\n  import BackTop from 'components/content/backTop/BackTop'\n  import {debounce} from \"../../common/utils/utils\";\n\n  import { getHomeMultidata, getHomeGoods } from \"network/home\"\n\n  export default {\n    name: \"Home\",\n    components: {\n      HomeSwiper,\n      RecommendView,\n      FeatureView,\n      NavBar,\n      TabControl,\n      GoodList,\n      Scroll,\n      BackTop\n    },\n    data() {\n      return {\n        banners: [],\n        recommends: [],\n        goods: {\n          'pop': {page: 0, list: []},\n          'new': {page: 0, list: []},\n          'sell': {page: 0, list: []},\n        },\n        currentType: 'pop',\n        isShowBackTop: false,\n        tabOffsetTop:0,\n        isTabFixed:false,\n        saveY:0\n      }\n    },\n    computed: {\n      showGoods() {\n        return this.goods[this.currentType].list\n      },\n      activated() {\n        this.$refs.scroll.scrollTo(0,this.saveY,0)\n\n      },\n      deactivated() {\n        //保存y值\n        this.saveY = this.refs.scroll.getScrollY()\n        // 取消全局事件的监听\n      },\n    },\n    created() {\n      // 1.请求多个数据\n      this.getHomeMultidata()\n\n      // 2.请求商品数据\n      this.getHomeGoods('pop')\n      this.getHomeGoods('new')\n      this.getHomeGoods('sell')\n    },\n    mounted() {\n      // 1.图片加载完成的事件监听\n      const refresh = debounce(this.$refs.scroll.refresh, 50)\n      this.$bus.$on('itemImageLoad', () => {\n        refresh()\n      })\n\n      \n    },\n    methods: {\n      /**\n       * 事件监听相关的方法\n       */\n      tabClick(index) {\n        switch (index) {\n          case 0:\n            this.currentType = 'pop'\n            break\n          case 1:\n            this.currentType = 'new'\n            break\n          case 2:\n            this.currentType = 'sell'\n            break\n        }\n      this.$refs.tabControl1.currentIndex = index;\n      this.$refs.tabControl2.currentIndex = index;\n      },\n      backClick() {\n        this.$refs.scroll.scrollTo(0, 0)\n      },\n      contentScroll(position) {\n        this.isShowBackTop = (-position.y) > 1000\n\n        //2.\n         this.isTabFixed = (-position.y) > this.tabOffsetTop\n      },\n      loadMore() {\n        this.getHomeGoods(this.currentType)\n      },\n      swiperImageLoad(){\n       this.tabOffsetTop = this.$refs.tabControl2.$el.offsetTop;\n      },\n      /**\n       * 网络请求相关的方法\n       */\n      getHomeMultidata() {\n        getHomeMultidata().then(res => {\n          // this.result = res;\n          this.banners = res.data.banner.list;\n          this.recommends = res.data.recommend.list;\n        })\n      },\n      getHomeGoods(type) {\n        const page = this.goods[type].page + 1\n        getHomeGoods(type, page).then(res => {\n          this.goods[type].list.push(...res.data.list)\n          this.goods[type].page += 1\n\n          \n          // 完成上拉加载更多\n          this.$refs.scroll.finishPullUp()\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  #home {\n    /*padding-top: 44px;*/\n    height: 100vh;\n    position: relative;\n  }\n\n  .home-nav {\n    background-color: var(--color-tint);\n    color: #fff;\n\n   /* position: fixed;\n    left: 0;\n    right: 0;\n    top: 0;\n    z-index: 9;*/\n  }\n\n  .tab-control {\n    position: relative;\n    /*top: 44px;*/\n    z-index: 9;\n  }\n\n  .content {\n    overflow: hidden;\n\n    position: absolute;\n    top: 44px;\n    bottom: 49px;\n    left: 0;\n    right: 0;\n  }\n\n  /*.content {*/\n    /*height: calc(100% - 93px);*/\n    /*overflow: hidden;*/\n    /*margin-top: 44px;*/\n  /*}*/\n</style>\n"],"sourceRoot":"src\\views\\home"}]}